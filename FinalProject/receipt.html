<!DOCTYPE html>
<html lang="ko">
<head>
	<!--<meta charset="utf-8">-->
	<!--<meta name="viewport">-->
	<title>HTML + CSS 실습 5</title> 
	<link rel="stylesheet" href="bootstrap/css/bootstrap.css">
	
	<style>
		/*flex*/
		.flex_col {
			display: flex;
			
		}
		.flex_row {
			display: flex;
			flex-direction: row;
		}
		.flex_wrap {
			flex-wrap: wrap;
			justify-content: center;
		}
		/*정렬*/
		.center {
			position: absolute;
			left: 50%;
			top: 50%;
			transform: translate(-50%, -50%);
		}

		
		/*div*/
		.box_white {
			background-color:#e9ecef;
			/*margin: 10px;*/
			padding: 10px;
			border-radius: 5px;
		}
		/*header*/
		.box_header_white {
			background-color:#e9ecef;
			/*margin: 10px;*/
			padding: 20px;
			border-radius: 5px;
		}

		/*nav*/
		/*aside*/
		.box_aside_white {
			width: 600px;
			background-color: #e9ecef;
			margin: 10px;
			padding: 10px;
			border-radius: 5px;
		
			
		}
		/*section*/
		.box_section_white {
			background-color: #e9ecef;
			margin: 10px;
			padding: 10px;
			border-radius: 5px;
			
		}
		/*section - card*/
		.card_header {
			background-color: #e9ecef;
			margin: 10px;
			padding: 20px;
		}
		.card_section {
			background-color: #e9ecef;
			margin: 5px;
			
		}
	
	</style>
	<style>
		/*section - card*/
		.card {
			background-color: #e9ecef;
			margin: 5px;
			
		}
        /*login*/
        .box_login {
            padding: 20px;
            width: 400px;
        }
	</style>
	<script>
		function GetCookie (name) {
			// 쿠키문자열을 ;을 경계로 분할
			let pairs = document.cookie.split(";"); 
			for(let i=0; i<pairs.length; i++) {
				// 쿠키 앞뒤의 빈칸 제거
				let pair = pairs[i].trim(); 
				let unit = pair.split("=");
				if(unit[0] == name)
				return unescape(unit[1]);
			}
			return null;
			}
		function SetCookie (name, value, expireDate) {
			let cookieStr = name + "=" + escape(value) + 
			((expireDate == null)?"":("; expires=" + 
			expireDate.toUTCString()));
			document.cookie = cookieStr;
		}
		</script>

</head>
<body>
	<!--최상단-->
	<nav align="right">
		<div class="container">
			<img src="svg/heart.svg" style="width: 25px;" class="my-3 mx-2">
			<img src="svg/cart3.svg" style="width: 25px;" class="my-3 mx-2" onclick="location.href='cart.html'">
			<img src="svg/person-circle.svg" id="login_profile" style="width: 25px;" class="my-3 mx-2" onclick="location.href='login.html'"> 
		</div>
	</nav>

	<!--헤더-->
    <header>
		<div class="container">
			<div class="box_header_white border border-2 rounded-2">
				<h1 align="center">T-SHIRTS</h1>
			<nav>
				<ul class="nav nav-underline justify-content-center"">
					<li class="nav-item">
					  <a class="nav-link link-dark" href="store.html">STORE</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link link-dark" aria-current="page" href="#">DIY</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link link-dark disabled" href="#">CS</a>
					</li>
					<li class="nav-item">
					  <a class="nav-link link-dark" aria-disabled="true" href="aboutus.html">About us</a>
					</li>
				  </ul>
			</nav>
			</div>
		</div>
	</header>
	
    <div class="container">
        <div class="">
            <div class="d-flex justify-content-center">
                <div class="card mt-5 p-5 pt-3" style="width: 400px;">
                    <h1 class="h3 mt-2 mb-5 fw-normal" align="center">주문 완료</h1>
                    <div class="mb-3">
                        <div class="row">
                            <div class="col">입금 계좌 안내</div>
                            <div class="col-7">농협<br>
                            1234567890<br>
                            눈송이<br>
                            <div id="total_price">27000원</div>
                            </div>
                        </div>
                        <hr>
                        <div class="mb-3">
                            <div class="row">
                                <div class="col">입금 기간</div>
                                <div class="col-7" id="deadline"></div>
                            </div>
                        </div>
                        <hr>
                        <div class="mb-3">
                            <div class="row">
                                <div class="col">주문번호</div>
                                <div class="col-7" id="orderNumber"></div>
                            </div>
                        </div>
                        <hr>
                        <div class="mb-3">
                            <div class="row">
                                <div class="col">배송지</div>
                                <div class="col-7">전지원<br>
                                01012342233<br>
                                주소지뭐시기<br>
                                106-1234<br>
                                (12303)<br>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="">
                            <div class="row">
                                <div class="col">배송 방법</div>
                                <div class="col-7">택배</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-grid">
                        <!--<button class="btn btn-dark" type="button">주문서로</button>-->
                        
                    </div>
                </div>
            </div>
        </div>
    </div>

	<script>
        // getItem
        const now = window.localStorage.getItem('now');
        let item_name, item_img, item_price;
    
        if (now === 'a') {
            item_name = window.localStorage.getItem('a_name');
            item_img = window.localStorage.getItem('a_img');
            item_price = window.localStorage.getItem('a_price');
        } else if (now === 'b') {
            item_name = window.localStorage.getItem('b_name');
            item_img = window.localStorage.getItem('b_img');
            item_price = window.localStorage.getItem('b_price');
        } else if (now === 'c') {
            item_name = window.localStorage.getItem('c_name');
            item_img = window.localStorage.getItem('c_img');
            item_price = window.localStorage.getItem('c_price');
        }
    
        let size = window.localStorage.getItem('selected_size');
        let count = window.localStorage.getItem('selected_number');
    
        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + '원';
        }
    
        // 결과 출력
        //document.getElementById("selected_product").innerHTML = item_name + '<br>' + parseInt(item_price).toLocaleString()+'원' + '<br>' + 'size: ' + size + '<br>'+ '수량: '+ count;
    
        //document.getElementById("p_image").src = item_img;
        //document.getElementById("only_product").innerHTML = (parseInt(item_price)*parseInt(count)).toLocaleString() + '원';
        document.getElementById("total_price").innerHTML = (parseInt(item_price)*parseInt(count) + 3000).toLocaleString() + '원';

		function getFutureDate(daysToAdd) {
            const now = new Date();
            now.setDate(now.getDate() + daysToAdd);
            return now;
        }

        // 날짜와 시간을 형식에 맞게 문자열로 변환합니다.
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            return `${year}-${month}-${day} ${hours}:${minutes}까지`;
        }

		// 현재 날짜를 8자리 문자열로 변환합니다.
        function getTodayDate() {
            const now = new Date();
            const year = String(now.getFullYear());
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            return year + month + day;
        }

        // 7자리 랜덤 숫자를 생성합니다.
        function getRandomNumber() {
            return Math.floor(100000 + Math.random() * 900000); // 1000000에서 9999999 사이의 숫자 생성
        }

        // 주문번호를 생성합니다.
        function generateOrderNumber() {
            const todayDate = getTodayDate();
            const randomNumber = getRandomNumber();
			window.localStorage.setItem('ordernumber', todayDate + randomNumber.toString());
            return todayDate + randomNumber;
        }
        
		// 3일 후의 날짜와 시간을 계산하여 출력합니다.
		const futureDate = getFutureDate(3);
		const formattedDate = formatDate(futureDate);
		document.getElementById('deadline').textContent = formattedDate;

		// 주문번호를 생성하여 출력합니다.
		
		const orderNumber = generateOrderNumber();
		document.getElementById('orderNumber').textContent = orderNumber;;
    </script>
	<div class="container">
		<footer class="py-3 my-4">
		  <ul class="nav justify-content-center border-bottom pb-3 mb-3">
			<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Home</a></li>
			<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Features</a></li>
			<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">Pricing</a></li>
			<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">FAQs</a></li>
			<li class="nav-item"><a href="#" class="nav-link px-2 text-muted">About</a></li>
		  </ul>
		  <p class="text-center text-muted">&copy; 2022 Company, Inc</p>
		</footer>
	  </div>
	  <script>
		let userStatus = GetCookie('userStatus');
		

		let loginProfile = document.getElementById('login_profile');

		if (userStatus == null || userStatus == 'non-member') {
        loginProfile.src = 'svg/question-circle.svg';
        loginProfile.onclick = function() {
            location.href = 'login.html';
        };
		} else if (userStatus == 'member') {
			loginProfile.src = 'svg/person-circle.svg';
			loginProfile.onclick = function() {
				location.href = 'mypage.html';
			};
		}
</script>
</body>
</html>